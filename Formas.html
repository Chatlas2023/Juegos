<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Elimina los Objetos</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            touch-action: manipulation;
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            user-select: none;
            -webkit-user-select: none;
        }
        
        #gameArea {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #f0f0f0;
        }
        
        .object {
            position: absolute;
            border-radius: 50%;
            cursor: pointer;
            touch-action: manipulation;
        }
        
        #scorePanel {
            position: fixed;
            top: 10px;
            left: 10px;
            background-color: rgba(255, 255, 255, 0.7);
            padding: 10px;
            border-radius: 5px;
            font-size: 16px;
            z-index: 100;
        }
        
        #gameOver {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            display: none;
            z-index: 200;
        }
        
        #restartButton {
            background-color: #4CAF50;
            border: none;
            color: white;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin-top: 15px;
            cursor: pointer;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div id="gameArea"></div>
    
    <div id="scorePanel">
        Puntuación: <span id="score">0</span><br>
        Mejor Puntuación: <span id="topScore">0</span>
    </div>
    
    <div id="gameOver">
        <h2>¡Juego Terminado!</h2>
        <p>Tu puntuación: <span id="finalScore">0</span></p>
        <p>Mejor puntuación: <span id="finalTopScore">0</span></p>
        <button id="restartButton">Jugar de Nuevo</button>
    </div>

    <script>
        // Variables del juego
        let score = 0;
        let topScore = localStorage.getItem('topScore') || 0;
        let gameSpeed = 1000; // ms entre objetos
        let gameActive = true;
        let objectsOnScreen = 0;
        const maxObjects = 10; // Máximo de objetos en pantalla simultáneamente
        
        // Elementos del DOM
        const gameArea = document.getElementById('gameArea');
        const scoreElement = document.getElementById('score');
        const topScoreElement = document.getElementById('topScore');
        const gameOverElement = document.getElementById('gameOver');
        const finalScoreElement = document.getElementById('finalScore');
        const finalTopScoreElement = document.getElementById('finalTopScore');
        const restartButton = document.getElementById('restartButton');
        
        // Actualizar la mejor puntuación mostrada
        topScoreElement.textContent = topScore;
        
        // Formas y colores posibles
        const shapes = ['circle', 'square', 'triangle', 'rectangle', 'pentagon'];
        const colors = ['#FF5733', '#33FF57', '#3357FF', '#F3FF33', '#FF33F3', '#33FFF3'];
        
        // Iniciar el juego
        startGame();
        
        function startGame() {
            gameActive = true;
            score = 0;
            gameSpeed = 1000;
            objectsOnScreen = 0;
            scoreElement.textContent = score;
            gameOverElement.style.display = 'none';
            
            // Limpiar cualquier objeto existente
            gameArea.innerHTML = '';
            gameArea.appendChild(scorePanel);
            
            // Iniciar el ciclo del juego
            setTimeout(spawnObject, gameSpeed);
        }
        
        function spawnObject() {
            if (!gameActive || objectsOnScreen >= maxObjects) {
                setTimeout(spawnObject, gameSpeed);
                return;
            }
            
            const object = document.createElement('div');
            object.className = 'object';
            
            // Tamaño aleatorio
            const size = Math.floor(Math.random() * 50) + 30;
            
            // Posición inicial aleatoria (asegurando que esté completamente en pantalla)
            const maxX = gameArea.clientWidth - size;
            const maxY = gameArea.clientHeight - size;
            const startX = Math.floor(Math.random() * maxX);
            const startY = Math.floor(Math.random() * maxY);
            
            // Forma y color aleatorios
            const shape = shapes[Math.floor(Math.random() * shapes.length)];
            const color = colors[Math.floor(Math.random() * colors.length)];
            
            // Estilo según la forma
            switch(shape) {
                case 'circle':
                    object.style.width = `${size}px`;
                    object.style.height = `${size}px`;
                    object.style.borderRadius = '50%';
                    break;
                case 'square':
                    object.style.width = `${size}px`;
                    object.style.height = `${size}px`;
                    object.style.borderRadius = '0';
                    break;
                case 'triangle':
                    object.style.width = '0';
                    object.style.height = '0';
                    object.style.borderLeft = `${size/2}px solid transparent`;
                    object.style.borderRight = `${size/2}px solid transparent`;
                    object.style.borderBottom = `${size}px solid ${color}`;
                    object.style.backgroundColor = 'transparent';
                    break;
                case 'rectangle':
                    object.style.width = `${size}px`;
                    object.style.height = `${size/2}px`;
                    object.style.borderRadius = '0';
                    break;
                case 'pentagon':
                    // Simulamos un pentágono con clip-path
                    object.style.width = `${size}px`;
                    object.style.height = `${size}px`;
                    object.style.clipPath = 'polygon(50% 0%, 100% 38%, 82% 100%, 18% 100%, 0% 38%)';
                    break;
            }
            
            if (shape !== 'triangle') {
                object.style.backgroundColor = color;
            }
            
            object.style.left = `${startX}px`;
            object.style.top = `${startY}px`;
            
            // Velocidad y dirección de movimiento aleatorios
            const speedX = (Math.random() - 0.5) * 4;
            const speedY = (Math.random() - 0.5) * 4;
            
            // Evento para eliminar el objeto al tocarlo
            object.addEventListener('click', function() {
                if (!gameActive) return;
                
                // Eliminar el objeto
                gameArea.removeChild(object);
                objectsOnScreen--;
                
                // Aumentar puntuación
                score++;
                scoreElement.textContent = score;
                
                // Aumentar dificultad gradualmente
                if (score % 5 === 0 && gameSpeed > 200) {
                    gameSpeed -= 50;
                }
            });
            
            // Añadir objeto al área de juego
            gameArea.appendChild(object);
            objectsOnScreen++;
            
            // Mover el objeto
            let posX = startX;
            let posY = startY;
            
            function moveObject() {
                if (!gameActive) return;
                
                posX += speedX;
                posY += speedY;
                
                // Rebotar en los bordes
                if (posX <= 0 || posX >= maxX) {
                    object.speedX = -speedX;
                }
                if (posY <= 0 || posY >= maxY) {
                    object.speedY = -speedY;
                }
                
                // Asegurar que el objeto no salga de la pantalla
                posX = Math.max(0, Math.min(posX, maxX));
                posY = Math.max(0, Math.min(posY, maxY));
                
                object.style.left = `${posX}px`;
                object.style.top = `${posY}px`;
                
                requestAnimationFrame(moveObject);
            }
            
            moveObject();
            
            // Eliminar objeto después de un tiempo si no se toca
            setTimeout(() => {
                if (gameArea.contains(object)) {
                    gameArea.removeChild(object);
                    objectsOnScreen--;
                    endGame();
                }
            }, 5000);
            
            // Generar siguiente objeto
            setTimeout(spawnObject, gameSpeed);
        }
        
        function endGame() {
            if (!gameActive) return;
            
            gameActive = false;
            
            // Actualizar mejor puntuación
            if (score > topScore) {
                topScore = score;
                localStorage.setItem('topScore', topScore);
            }
            
            // Mostrar pantalla de fin de juego
            finalScoreElement.textContent = score;
            finalTopScoreElement.textContent = topScore;
            gameOverElement.style.display = 'block';
        }
        
        // Evento para el botón de reinicio
        restartButton.addEventListener('click', startGame);
        
        // Evitar el desplazamiento táctil no deseado
        document.addEventListener('touchmove', function(e) {
            if (gameActive) {
                e.preventDefault();
            }
        }, { passive: false });
    </script>
</body>
</html>
