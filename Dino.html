<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Dino Game Web</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #f7f7f7;
            font-family: Arial, sans-serif;
            touch-action: manipulation;
        }
        
        #game-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
        }
        
        #game-screen {
            position: absolute;
            width: 600px;
            height: 150px;
            background-color: white;
            border: 1px solid #ccc;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            overflow: hidden;
        }
        
        #ground {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 20px;
            background-color: #333;
        }
        
        #dino {
            position: absolute;
            bottom: 20px;
            left: 50px;
            width: 40px;
            height: 60px;
            background-color: #555;
        }
        
        .cactus {
            position: absolute;
            bottom: 20px;
            width: 20px;
            height: 40px;
            background-color: #0a0;
        }
        
        .bird {
            position: absolute;
            width: 40px;
            height: 20px;
            background-color: #a00;
        }
        
        #score {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 20px;
            color: #333;
        }
        
        #game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 30px;
            color: red;
            display: none;
        }
        
        #jump-btn {
            position: absolute;
            bottom: 30px;
            right: 30px;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: rgba(0,0,0,0.2);
            border: none;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="game-screen">
            <div id="ground"></div>
            <div id="dino"></div>
            <div id="score">0</div>
            <div id="game-over">GAME OVER</div>
        </div>
        <button id="jump-btn">Saltar</button>
    </div>

    <script>
        // Elementos del juego
        const dino = document.getElementById('dino');
        const gameScreen = document.getElementById('game-screen');
        const scoreElement = document.getElementById('score');
        const gameOverElement = document.getElementById('game-over');
        const jumpBtn = document.getElementById('jump-btn');
        
        // Variables del juego
        let isJumping = false;
        let isGameOver = false;
        let score = 0;
        let speed = 5;
        let gravity = 0.6;
        let dinoPosition = 0;
        let dinoVelocity = 0;
        let obstacles = [];
        let gameSpeed = 5;
        let lastObstacleTime = 0;
        let animationId;
        
        // Estados del dinosaurio (para animación)
        let dinoState = 1;
        const dinoStates = [
            { color: '#555', height: 60 },  // Estado normal
            { color: '#555', height: 50 },  // Pie derecho
            { color: '#555', height: 50 }   // Pie izquierdo
        ];
        
        // Eventos
        document.addEventListener('keydown', (e) => {
            if ((e.code === 'Space' || e.key === 'ArrowUp') && !isJumping && !isGameOver) {
                jump();
            } else if (e.key === 'r' && isGameOver) {
                resetGame();
            }
        });
        
        jumpBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            if (!isJumping && !isGameOver) {
                jump();
            } else if (isGameOver) {
                resetGame();
            }
        });
        
        // Función de salto
        function jump() {
            if (!isJumping) {
                isJumping = true;
                dinoVelocity = -12;
            }
        }
        
        // Función para crear obstáculos
        function createObstacle() {
            const now = Date.now();
            if (now - lastObstacleTime > 1500) {
                lastObstacleTime = now;
                
                const obstacleType = Math.random() > 0.3 ? 'cactus' : 'bird';
                const obstacle = document.createElement('div');
                obstacle.classList.add(obstacleType);
                
                if (obstacleType === 'cactus') {
                    obstacle.style.height = `${Math.random() > 0.5 ? 40 : 60}px`;
                } else {
                    // Pájaro - posición más alta
                    obstacle.style.bottom = `${60 + Math.random() * 30}px`;
                }
                
                obstacle.style.left = '600px';
                gameScreen.appendChild(obstacle);
                
                obstacles.push({
                    element: obstacle,
                    type: obstacleType,
                    x: 600,
                    width: obstacleType === 'cactus' ? 20 : 40,
                    height: parseInt(obstacle.style.height),
                    y: obstacleType === 'cactus' ? 20 : parseInt(obstacle.style.bottom)
                });
            }
        }
        
        // Función de actualización del juego
        function updateGame() {
            if (isGameOver) {
                gameOverElement.style.display = 'block';
                return;
            }
            
            // Actualizar posición del dinosaurio
            dinoVelocity += gravity;
            dinoPosition += dinoVelocity;
            
            if (dinoPosition > 0) {
                dinoPosition = 0;
                isJumping = false;
            }
            
            dino.style.bottom = `${20 - dinoPosition}px`;
            
            // Animación del dinosaurio (cambiar entre estados)
            if (!isJumping) {
                dinoState = (dinoState + 1) % 3;
                dino.style.backgroundColor = dinoStates[dinoState].color;
                dino.style.height = `${dinoStates[dinoState].height}px`;
            }
            
            // Crear obstáculos
            createObstacle();
            
            // Mover y detectar colisiones con obstáculos
            for (let i = obstacles.length - 1; i >= 0; i--) {
                const obstacle = obstacles[i];
                obstacle.x -= gameSpeed;
                obstacle.element.style.left = `${obstacle.x}px`;
                
                // Detectar colisión
                const dinoRect = {
                    x: 50,
                    y: 20 - dinoPosition,
                    width: 40,
                    height: dinoStates[dinoState].height
                };
                
                const obstacleRect = {
                    x: obstacle.x,
                    y: obstacle.y,
                    width: obstacle.width,
                    height: obstacle.height
                };
                
                if (checkCollision(dinoRect, obstacleRect)) {
                    isGameOver = true;
                    break;
                }
                
                // Eliminar obstáculos que salieron de la pantalla
                if (obstacle.x < -obstacle.width) {
                    gameScreen.removeChild(obstacle.element);
                    obstacles.splice(i, 1);
                    score += 10;
                    scoreElement.textContent = score;
                    
                    // Aumentar velocidad cada 100 puntos
                    if (score % 100 === 0) {
                        gameSpeed += 0.5;
                    }
                }
            }
            
            animationId = requestAnimationFrame(updateGame);
        }
        
        // Función para detectar colisiones
        function checkCollision(rect1, rect2) {
            return (
                rect1.x < rect2.x + rect2.width &&
                rect1.x + rect1.width > rect2.x &&
                rect1.y < rect2.y + rect2.height &&
                rect1.y + rect1.height > rect2.y
            );
        }
        
        // Función para reiniciar el juego
        function resetGame() {
            // Limpiar obstáculos
            obstacles.forEach(obstacle => {
                gameScreen.removeChild(obstacle.element);
            });
            obstacles = [];
            
            // Resetear variables
            isJumping = false;
            isGameOver = false;
            score = 0;
            gameSpeed = 5;
            dinoPosition = 0;
            dinoVelocity = 0;
            
            // Resetear UI
            dino.style.bottom = '20px';
            scoreElement.textContent = '0';
            gameOverElement.style.display = 'none';
            
            // Reiniciar juego
            cancelAnimationFrame(animationId);
            updateGame();
        }
        
        // Iniciar juego
        updateGame();
    </script>
</body>
</html>
