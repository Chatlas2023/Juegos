<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Dino Game Chrome</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            overflow: hidden;
            touch-action: manipulation;
            background-color: #f7f7f7;
            font-family: 'Arial', sans-serif;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        #game-container {
            position: relative;
            width: 100%;
            height: 200px;
            max-width: 600px;
            margin: 0 auto;
            overflow: hidden;
            background-color: white;
        }
        
        #ground {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 2px;
            background-color: #535353;
        }
        
        #dino {
            position: absolute;
            width: 44px;
            height: 47px;
            bottom: 0;
            left: 20px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 47"><path d="M6 47 L6 30 L10 30 L10 27 L14 27 L14 24 L18 24 L18 21 L22 21 L22 18 L26 18 L26 21 L30 21 L30 24 L34 24 L34 30 L38 30 L38 47 L42 47 L42 15 L38 15 L38 12 L34 12 L34 9 L30 9 L30 6 L26 6 L26 3 L22 3 L18 3 L18 6 L14 6 L14 9 L10 9 L10 12 L6 12 L6 15 L2 15 L2 47 Z" fill="%23222222"/><rect x="18" y="36" width="4" height="4" fill="white"/><rect x="30" y="36" width="4" height="4" fill="white"/><rect x="26" y="40" width="4" height="4" fill="%23222222"/></svg>');
            background-repeat: no-repeat;
            z-index: 2;
            transition: transform 0.1s;
        }

        /* Versión agachado */
        #dino.duck {
            width: 60px;
            height: 30px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30"><path d="M10 30 L15 30 L15 15 L20 15 L20 10 L25 10 L25 15 L30 15 L30 30 L35 30 L35 15 L40 15 L40 10 L45 10 L45 15 L50 15 L50 30 L55 30 L55 5 L50 5 L50 0 L45 0 L45 5 L40 5 L40 0 L35 0 L35 5 L30 5 L30 0 L25 0 L25 5 L20 5 L20 0 L15 0 L15 5 L10 5 L10 30 Z" fill="%23222222"/><rect x="20" y="20" width="5" height="5" fill="white"/><rect x="40" y="20" width="5" height="5" fill="white"/></svg>');
        }
        
        .cactus {
            position: absolute;
            bottom: 0;
            width: 24px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 50"><path d="M6 50 L6 20 L2 20 L2 15 L6 15 L6 10 L10 10 L10 5 L14 5 L14 10 L18 10 L18 15 L22 15 L22 20 L18 20 L18 50 Z" fill="%23222222"/><path d="M10 20 L10 15 L14 15 L14 20 Z" fill="%23585858"/></svg>');
            background-repeat: no-repeat;
            z-index: 1;
        }
        
        .cactus.tall {
            height: 50px;
        }
        
        .cactus.medium {
            height: 35px;
        }
        
        .cactus.small {
            height: 25px;
        }
        
        #score {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 14px;
            color: #535353;
            font-family: 'Courier New', monospace;
        }
        
        #game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            font-size: 24px;
            color: #535353;
            display: none;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 15px 25px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
        }
        
        #restart {
            margin-top: 15px;
            padding: 8px 15px;
            background-color: #535353;
            color: white;
            border: none;
            border-radius: 3px;
            font-size: 16px;
            font-family: 'Courier New', monospace;
        }
        
        #instructions {
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 12px;
            color: #535353;
            font-family: 'Courier New', monospace;
        }
        
        .cloud {
            position: absolute;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 20"><path d="M55 10 Q50 20 40 15 Q35 25 25 10 Q15 20 5 10 Q0 5 5 5 Q10 0 15 5 Q20 0 30 0 Q40 0 45 5 Q50 0 55 5 Z" fill="%23f0f0f0"/></svg>');
            background-repeat: no-repeat;
            width: 60px;
            height: 20px;
            z-index: 0;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="ground"></div>
        <div id="dino"></div>
        <div id="score">0</div>
        <div id="game-over">
            GAME OVER
            <button id="restart">Reiniciar</button>
        </div>
        <div id="instructions">Toca arriba para saltar, abajo para agacharte</div>
    </div>

    <script>
        const dino = document.getElementById('dino');
        const gameContainer = document.getElementById('game-container');
        const scoreElement = document.getElementById('score');
        const gameOverElement = document.getElementById('game-over');
        const restartButton = document.getElementById('restart');
        
        let isJumping = false;
        let isDucking = false;
        let isGameOver = false;
        let score = 0;
        let gameSpeed = 5;
        let obstacleInterval;
        let cloudInterval;
        let gravity;
        let jumpHeight = 0;
        let jumpUpInterval;
        let jumpDownInterval;
        
        // Tamaño del contenedor de juego
        const containerWidth = gameContainer.offsetWidth;
        const containerHeight = gameContainer.offsetHeight;
        
        // Posición inicial del dinosaurio
        dino.style.bottom = '0';
        dino.style.left = '20px';
        
        function jump() {
            if (isJumping || isGameOver) return;
            
            isJumping = true;
            jumpHeight = 0;
            dino.style.transform = 'translateY(0)';
            dino.classList.remove('duck');
            isDucking = false;
            
            // Limpiar intervalos anteriores si existen
            clearInterval(jumpUpInterval);
            clearInterval(jumpDownInterval);
            
            // Salto hacia arriba
            jumpUpInterval = setInterval(() => {
                jumpHeight += 4;
                dino.style.transform = `translateY(-${jumpHeight}px)`;
                
                if (jumpHeight >= 80) {
                    clearInterval(jumpUpInterval);
                    
                    // Caída
                    jumpDownInterval = setInterval(() => {
                        jumpHeight -= 4;
                        dino.style.transform = `translateY(-${jumpHeight}px)`;
                        
                        if (jumpHeight <= 0) {
                            clearInterval(jumpDownInterval);
                            isJumping = false;
                            dino.style.transform = 'translateY(0)';
                        }
                    }, 20);
                }
            }, 20);
        }
        
        function duck() {
            if (isJumping || isGameOver) return;
            
            isDucking = true;
            dino.classList.add('duck');
        }
        
        function stand() {
            isDucking = false;
            dino.classList.remove('duck');
        }
        
        function createCactus() {
            const cactus = document.createElement('div');
            cactus.className = 'cactus';
            
            // Tipo de cactus aleatorio
            const cactusTypes = ['small', 'medium', 'tall'];
            const randomType = cactusTypes[Math.floor(Math.random() * cactusTypes.length)];
            cactus.classList.add(randomType);
            
            // Posición inicial a la derecha
            cactus.style.left = containerWidth + 'px';
            
            gameContainer.appendChild(cactus);
            return cactus;
        }
        
        function createCloud() {
            const cloud = document.createElement('div');
            cloud.className = 'cloud';
            
            // Posición vertical aleatoria
            const topPos = Math.floor(Math.random() * 60) + 10;
            cloud.style.top = topPos + 'px';
            cloud.style.left = containerWidth + 'px';
            
            // Tamaño aleatorio
            const scale = 0.5 + Math.random() * 0.7;
            cloud.style.transform = `scale(${scale})`;
            cloud.style.opacity = 0.7 + Math.random() * 0.3;
            
            gameContainer.appendChild(cloud);
            return cloud;
        }
        
        function moveObstacles() {
            const cacti = document.querySelectorAll('.cactus');
            const clouds = document.querySelectorAll('.cloud');
            
            cacti.forEach(cactus => {
                const cactusLeft = parseInt(cactus.style.left);
                const newPosition = cactusLeft - gameSpeed;
                
                if (newPosition < -24) {
                    cactus.remove();
                } else {
                    cactus.style.left = newPosition + 'px';
                }
                
                // Detectar colisión
                if (!isGameOver) {
                    const dinoRect = dino.getBoundingClientRect();
                    const cactusRect = cactus.getBoundingClientRect();
                    
                    // Ajustar detección de colisión si está agachado
                    const dinoBottomAdjust = isDucking ? 15 : 0;
                    
                    if (
                        dinoRect.right > cactusRect.left + 5 &&
                        dinoRect.left + 5 < cactusRect.right &&
                        dinoRect.bottom - dinoBottomAdjust > cactusRect.top
                    ) {
                        gameOver();
                    }
                }
            });
            
            clouds.forEach(cloud => {
                const cloudLeft = parseInt(cloud.style.left);
                const newPosition = cloudLeft - (gameSpeed * 0.5);
                
                if (newPosition < -60) {
                    cloud.remove();
                } else {
                    cloud.style.left = newPosition + 'px';
                }
            });
        }
        
        function startGame() {
            // Limpiar estado anterior
            isGameOver = false;
            score = 0;
            gameSpeed = 5;
            gameOverElement.style.display = 'none';
            scoreElement.textContent = '0';
            
            // Eliminar elementos anteriores
            document.querySelectorAll('.cactus, .cloud').forEach(el => el.remove());
            
            // Restablecer posición del dinosaurio
            stand();
            dino.style.transform = 'translateY(0)';
            isJumping = false;
            isDucking = false;
            clearInterval(jumpUpInterval);
            clearInterval(jumpDownInterval);
            
            // Iniciar generación de cactus
            clearInterval(obstacleInterval);
            obstacleInterval = setInterval(() => {
                if (!isGameOver && Math.random() > 0.7) {
                    createCactus();
                }
            }, 1500);
            
            // Iniciar generación de nubes
            clearInterval(cloudInterval);
            cloudInterval = setInterval(() => {
                if (!isGameOver && Math.random() > 0.8) {
                    createCloud();
                }
            }, 3000);
            
            // Iniciar actualización del juego
            requestAnimationFrame(updateGame);
        }
        
        function updateGame() {
            if (!isGameOver) {
                moveObstacles();
                
                // Actualizar puntuación
                score++;
                scoreElement.textContent = Math.floor(score / 5);
                
                // Aumentar dificultad
                if (score % 500 === 0) {
                    gameSpeed += 0.3;
                }
                
                requestAnimationFrame(updateGame);
            }
        }
        
        function gameOver() {
            isGameOver = true;
            gameOverElement.style.display = 'block';
            clearInterval(obstacleInterval);
            clearInterval(cloudInterval);
            
            // Animación de muerte
            dino.style.backgroundImage = 'url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 47"><path d="M6 47 L6 30 L10 30 L10 27 L14 27 L14 24 L18 24 L18 21 L22 21 L22 18 L26 18 L26 21 L30 21 L30 24 L34 24 L34 30 L38 30 L38 47 L42 47 L42 15 L38 15 L38 12 L34 12 L34 9 L30 9 L30 6 L26 6 L26 3 L22 3 L18 3 L18 6 L14 6 L14 9 L10 9 L10 12 L6 12 L6 15 L2 15 L2 47 Z" fill="%23222222"/><rect x="18" y="36" width="4" height="4" fill="white" transform="rotate(15 20 38)"/><rect x="30" y="36" width="4" height="4" fill="white" transform="rotate(-15 30 38)"/><rect x="26" y="40" width="4" height="4" fill="%23222222" transform="rotate(10 28 42)"/></svg>\')';
        }
        
        // Event listeners
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                if (isGameOver) {
                    startGame();
                } else {
                    jump();
                }
                e.preventDefault();
            } else if (e.code === 'ArrowDown') {
                if (!isGameOver && !isJumping) {
                    duck();
                }
            }
        });
        
        document.addEventListener('keyup', (e) => {
            if (e.code === 'ArrowDown') {
                if (!isGameOver && isDucking) {
                    stand();
                }
            }
        });
        
        // Control táctil para móviles
        gameContainer.addEventListener('touchstart', (e) => {
            if (isGameOver) {
                startGame();
            } else {
                // Si el toque es en la parte inferior de la pantalla, agacharse
                const touchY = e.touches[0].clientY;
                const containerRect = gameContainer.getBoundingClientRect();
                const relativeY = touchY - containerRect.top;
                
                if (relativeY > containerHeight * 0.6) {
                    if (!isDucking) {
                        duck();
                    }
                } else {
                    jump();
                }
            }
            e.preventDefault();
        });
        
        gameContainer.addEventListener('touchend', (e) => {
            if (isDucking) {
                stand();
            }
        });
        
        // También permitir clic para mayor compatibilidad
        gameContainer.addEventListener('mousedown', (e) => {
            if (isGameOver) {
                startGame();
            } else {
                // Si el clic es en la parte inferior de la pantalla, agacharse
                const clickY = e.clientY;
                const containerRect = gameContainer.getBoundingClientRect();
                const relativeY = clickY - containerRect.top;
                
                if (relativeY > containerHeight * 0.6) {
                    if (!isDucking) {
                        duck();
                    }
                } else {
                    jump();
                }
            }
        });
        
        gameContainer.addEventListener('mouseup', (e) => {
            if (isDucking) {
                stand();
            }
        });
        
        // Botón de reinicio
        restartButton.addEventListener('click', startGame);
        
        // Iniciar juego al cargar
        startGame();
    </script>
</body>
</html>
